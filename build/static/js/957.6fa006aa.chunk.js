"use strict";(self.webpackChunkchat=self.webpackChunkchat||[]).push([[957],{46658:function(n,t,e){e(72791);t.Z=e.p+"static/media/rate.9188c89ba07c8dbf28dc6178678670b2.svg"},90470:function(n,t,e){e.d(t,{FZ:function(){return B},RL:function(){return S},V5:function(){return A},y1:function(){return M},LO:function(){return D},Q8:function(){return E},w8:function(){return N}});var r=e(70885),i=e(36314),a=e(697),o=e(20890),c=e(13400),s=e(50533),l=e(13239),u=e(3053),d=e(64387),p=e(13967),f=e(76526),m=e(27501),g=e(97863),x=e(72791),h=e(15122),b=e(80184),j=function(n){var t=n.isPlaying,e=(0,x.useState)(Array.from({length:10}).map((function(n,t){var e=Math.random(),r=Math.abs(t-5);return r<2.5&&(e=e<.3?e+.3:e),{scale:e*=6*(1-r/5),animationDelay:Math.random()>.5?"180ms":"100ms"}}))),i=(0,r.Z)(e,2),a=i[0];i[1];return(0,b.jsx)("div",{class:"audio-wave",children:a.map((function(n){return(0,b.jsx)("hr",{className:t?"animate":"",style:{"--scale":n.scale,animationDelay:n.animationDelay}})}))})};var v=e.p+"static/media/voice.0438ed445e5fe3972596c319723e3a89.svg",y=e(59434),Z=e(86026),w=e(2703);var k=e.p+"static/media/robot.5d700a3fdf5aca98f06d331b045698d2.svg";var C=e.p+"static/media/user.711687206e59f15defecaedd3b464176.svg",R=e(46658),P=e(57621),I=e(39504),L=e(86731),S=function(n){var t=n.el,e=n.menu,r=(0,p.Z)();return(0,b.jsxs)(i.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:[(0,b.jsx)(a.Z,{p:1.5,sx:{backgroundColor:t.incoming?r.palette.background.default:r.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsxs)(i.Z,{spacing:2,children:[(0,b.jsxs)(i.Z,{p:2,spacing:3,direction:"row",alignItems:"center",sx:{backgroundColor:r.palette.background.paper,borderRadius:1},children:[(0,b.jsx)(f.Z,{size:48}),(0,b.jsx)(o.Z,{variant:"caption",children:"Abstract.png"}),(0,b.jsx)(c.Z,{children:(0,b.jsx)(m.Z,{})})]}),(0,b.jsx)(o.Z,{variant:"body2",sx:{color:t.incoming?r.palette.text:"#fff"},children:t.message})]})}),e&&(0,b.jsx)(T,{})]})},A=function(n){var t=n.el,e=n.menu,r=(0,p.Z)();return(0,b.jsxs)(i.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:[(0,b.jsx)(a.Z,{p:1.5,sx:{backgroundColor:t.incoming?r.palette.background.default:r.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsx)(i.Z,{spacing:2,children:(0,b.jsxs)(i.Z,{p:2,spacing:3,alignItems:"start",sx:{backgroundColor:r.palette.background.paper,borderRadius:1},children:[(0,b.jsx)("img",{src:t.preview,alt:t.message,style:{maxHeight:210,borderRadius:"10px"}}),(0,b.jsxs)(i.Z,{spacing:2,children:[(0,b.jsx)(o.Z,{variant:"subtitle2",children:"Creating Chat App"}),(0,b.jsx)(o.Z,{variant:"subtitle2",sx:{color:r.palette.primary.main},component:s.Z,to:"//https://www.youtube.com",children:"www.youtube.com"})]}),(0,b.jsx)(o.Z,{variant:"body2",color:t.incoming?r.palette.text:"#fff",children:t.message})]})})}),e&&(0,b.jsx)(T,{})]})},E=function(n){var t=n.el,e=n.menu,r=(0,p.Z)();return(0,b.jsxs)(i.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:[(0,b.jsx)(a.Z,{p:1.5,sx:{backgroundColor:t.incoming?r.palette.background.default:r.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsxs)(i.Z,{spacing:2,children:[(0,b.jsx)(i.Z,{p:2,direction:"column",spacing:3,alignItems:"center",sx:{backgroundColor:r.palette.background.paper,borderRadius:1},children:(0,b.jsx)(o.Z,{variant:"body2",color:r.palette.text,children:t.message})}),(0,b.jsx)(o.Z,{variant:"body2",color:t.incoming?r.palette.text:"#fff",children:t.reply})]})}),e&&(0,b.jsx)(T,{})]})},M=function(n){var t=n.el,e=n.menu,r=(0,y.I0)(),o=(0,p.Z)();return(0,b.jsxs)(i.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:[(0,b.jsx)(a.Z,{p:1.5,sx:{backgroundColor:t.incoming?o.palette.background.default:o.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsx)(i.Z,{spacing:1,children:(0,b.jsx)("img",{onClick:function(){r((0,Z.Qp)({isShow:!0,url:t.content}))},src:t.content,alt:t.content,style:{maxHeight:210,borderRadius:"10px"}})})}),e&&(0,b.jsx)(T,{})]})},N=function(n){var t=n.el,e=(n.menu,(0,p.Z)());return"assistant_score"===t.creator?(0,b.jsxs)(P.Z,{sx:{minWidth:275},style:{position:"relative"},children:[(0,b.jsx)("img",{src:R.Z,style:{position:"absolute",bottom:"-10px",right:"-10px"}}),(0,b.jsx)(I.Z,{style:{position:"relative",wordBreak:"break-all"},children:t.content})]}):"assistant"!==t.creator||t.isShow?(0,b.jsxs)(i.Z,{direction:"row",justifyContent:t.incoming?"start":"end",alignItems:"flex-start",style:{flex:1},children:[t.incoming?(0,b.jsx)("img",{style:{marginRight:"12px"},src:k}):null,(0,b.jsx)(a.Z,{p:1.5,sx:{backgroundColor:t.incoming?e.palette.background.default:e.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsx)(o.Z,{variant:"body2",color:t.incoming?e.palette.text:"#fff",style:{whiteSpace:"pre-line"},children:"assistant"===t.creator?(0,b.jsx)(L.Z,{originalText:t.content}):t.content})}),t.incoming?null:(0,b.jsx)("img",{style:{marginLeft:"12px"},src:C})]}):null},B=function(n){var t,e=n.el,r=n.menu,o=(0,x.useRef)(),c=(0,p.Z)(),s=(0,y.I0)(),l=(0,y.v9)((function(n){return n.app})).history,u=(0,x.useMemo)((function(){var n;return(0,w.LU)((null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.duration)||0)}),[e]);return(0,x.useEffect)((function(){null!==e&&void 0!==e&&e.metadata&&(e.metadata.isPlaying?o.current.play():(o.current.pause(),o.current.currentTime=0))}),[e]),(0,x.useEffect)((function(){}),[]),(0,b.jsxs)(i.Z,{direction:"row",justifyContent:e.incoming?"start":"end",children:[(0,b.jsx)(a.Z,{p:1.5,sx:{backgroundColor:e.incoming?c.palette.background.default:c.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center"},onClick:function(){var n=l.find((function(n){return"audio"===n.subtype&&n.metadata.isPlaying}));n&&s((0,Z.s0)({id:n.id,isPlaying:!1})),s((0,Z.s0)({id:e.id,isPlaying:!0}))},children:[(0,b.jsx)("img",{src:v,style:{width:"24px",marginRight:"8px"}}),(0,b.jsx)(j,{isPlaying:null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.isPlaying}),(0,b.jsx)("audio",{on:!0,ref:o,onLoadedData:function(){var n;s((0,Z.Q)({id:e.id,duration:Math.ceil((null===(n=o.current)||void 0===n?void 0:n.duration)||"")})),l.find((function(n){return"audio"===n.subtype&&n.metadata.isPlaying}))||s((0,Z.s0)({id:e.id,isPlaying:!0}))},onCanPlay:function(){},onEnded:function(){s((0,Z.s0)({id:e.id,isPlaying:!1}))},src:e.content}),(0,b.jsx)("span",{style:{marginLeft:"12px"},children:u})]})}),r&&(0,b.jsx)(T,{})]})},D=function(n){var t=n.el,e=n.menu,r=((0,y.I0)(),(0,p.Z)());return(0,b.jsxs)(i.Z,{direction:"row",justifyContent:t.incoming?"start":"end",children:[(0,b.jsx)(a.Z,{p:1.5,sx:{backgroundColor:t.incoming?r.palette.background.default:r.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,b.jsx)(i.Z,{spacing:1,children:(0,b.jsx)(l.Z,{value:t.content,variant:"determinate"})})}),e&&(0,b.jsx)(T,{})]})},T=function(){var n=x.useState(null),t=(0,r.Z)(n,2),e=t[0],a=t[1],o=Boolean(e),c=function(n){a(n.currentTarget)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Z,{id:"basic-button","aria-controls":o?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":o?"true":void 0,onClick:c,size:20}),(0,b.jsx)(u.Z,{id:"basic-menu",anchorEl:e,open:o,onClose:function(){a(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:(0,b.jsx)(i.Z,{spacing:1,px:1,children:h.GF.map((function(n){return(0,b.jsx)(d.Z,{onClick:c,children:n.title})}))})})]})}},85670:function(n,t,e){var r=e(50225),i=e(29472),a=(0,r.Z)(i.Z)((function(n){var t=n.theme;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(t.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}));t.Z=a},86731:function(n,t,e){e.d(t,{Z:function(){return o}});var r=e(70885),i=e(72791),a=e(80184);function o(n){var t=n.originalText,e=(0,i.useState)(""),o=(0,r.Z)(e,2),c=o[0],s=o[1];return(0,i.useEffect)((function(){var n=0;c&&(n=c.length);var e=n,r=setInterval((function(){e<=t.length-1?(s(c+t.slice(n,e+1)),e++):clearInterval(r)}),200);return function(){clearInterval(r)}}),[t]),(0,a.jsx)("span",{style:{whiteSpace:"pre-line"},children:c})}},2703:function(n,t,e){function r(n){var t=n%60;return"".concat((n-t)/60,"\u2019").concat(t,"\u2019")}function i(n){return new Promise((function(t,e){var r=new FileReader;r.onload=function(n){t(n.target.result)},r.readAsDataURL(n),r.onerror=function(){e(new Error("blobToBase64 error"))}}))}function a(n){var t;n.forEach((function(n){t+=window.atob(n)}));for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return new Blob([e],{type:"audio/mp3"})}function o(n){var t=0;for(var e in n)isNaN(Number(n[e]))?"object"===typeof n[e]&&(t+=o(n[e])):t+=Number(n[e]);return t}function c(n){if(!n)return"";var t=n.replace("\u987e\u5ba2\uff1a","").replace("\u9500\u552e\uff1a",""),e=t.match(/<json[^>]*>([^<]|<(?!\/json))*(<\/json>)/);if(!e)return t;var r=null;try{r=JSON.parse(e[0].slice("<json>".length,e[0].length-e[2].length).replaceAll("\n",""))}catch(s){console.error("json parse error")}var i=r["\u6253\u5206\u7406\u7531"],a=o(r),c=t.split(e[0]);return"".concat(c[0],"\n\u5f97\u5206\uff1a").concat(a,"\u5206\n\u6253\u5206\u7406\u7531\uff1a").concat(i,"\n").concat(c[1])}e.d(t,{LU:function(){return r},OP:function(){return a},RZ:function(){return c},w8:function(){return i}})}}]);
//# sourceMappingURL=957.6fa006aa.chunk.js.map